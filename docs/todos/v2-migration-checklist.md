# Checklist de MigraÃ§Ã£o de Endpoints para V2

Este documento lista todos os endpoints V1 que ainda nÃ£o possuem versÃ£o V2 correspondente.

## Status da MigraÃ§Ã£o

- âœ… **Migrado**: Endpoint possui versÃ£o V2 funcional
- â³ **Pendente**: Endpoint ainda precisa ser migrado para V2
- âš ï¸ **Parcial**: Endpoint tem V2 mas falta funcionalidade (ex: mÃ©todo HTTP diferente)

---

## ğŸ“‹ Endpoints Pendentes de MigraÃ§Ã£o

### ğŸ” AutenticaÃ§Ã£o
- [ ] `GET /api/auth/callback` - Callback de autenticaÃ§Ã£o OAuth
- [ ] `POST /api/auth/mobile/register` - Registro de usuÃ¡rio mobile
- [ ] `POST /api/auth/mobile` - AutenticaÃ§Ã£o mobile (JWT)

### ğŸ± Gatos (Cats)
- [x] `GET /api/v2/cats` - Listar gatos âœ…
- [x] `POST /api/v2/cats` - Criar gato âœ…
- [x] `GET /api/v2/cats/{catId}/next-feeding` - PrÃ³xima alimentaÃ§Ã£o âœ…
- [x] `GET /api/v2/cats/{catId}` - **Buscar gato por ID** âœ…
- [x] `PUT /api/v2/cats/{catId}` - **Atualizar gato** âœ…
- [x] `DELETE /api/v2/cats/{catId}` - **Deletar gato** âœ…

### ğŸ½ï¸ AlimentaÃ§Ãµes (Feedings)
- [x] `GET /api/v2/feedings` - Listar alimentaÃ§Ãµes âœ…
- [x] `POST /api/v2/feedings` - Registrar alimentaÃ§Ã£o âœ…
- [x] `GET /api/v2/feedings/{id}` - Buscar alimentaÃ§Ã£o âœ…
- [x] `DELETE /api/v2/feedings/{id}` - Deletar alimentaÃ§Ã£o âœ…
- [x] `POST /api/v2/feedings/batch` - Registrar mÃºltiplas alimentaÃ§Ãµes âœ…
- [x] `GET /api/v2/feedings/last/{catId}` - Ãšltima alimentaÃ§Ã£o do gato âœ…
- [x] `GET /api/v2/feedings/stats` - EstatÃ­sticas de alimentaÃ§Ã£o âœ…
- [x] `GET /api/v2/feedings/cats` - Listar gatos para alimentaÃ§Ã£o âœ…
- [x] `PUT /api/v2/feedings/{id}` - **Atualizar alimentaÃ§Ã£o** âœ…

### ğŸ  DomicÃ­lios (Households)
- [x] `GET /api/v2/households` - Listar domicÃ­lios âœ…
- [x] `POST /api/v2/households` - Criar domicÃ­lio âœ…
- [x] `GET /api/v2/households/{id}` - Buscar domicÃ­lio âœ…
- [x] `PATCH /api/v2/households/{id}` - Atualizar domicÃ­lio âœ…
- [x] `DELETE /api/v2/households/{id}` - Deletar domicÃ­lio âœ…
- [x] `GET /api/v2/households/{id}/cats` - Listar gatos do household âœ…
- [x] `POST /api/v2/households/{id}/cats` - Adicionar gato ao household âœ…
- [x] `GET /api/v2/households/{id}/members` - Listar membros âœ…
- [x] `POST /api/v2/households/{id}/members` - Adicionar membro âœ…
- [x] `DELETE /api/v2/households/{id}/members/{userId}` - Remover membro âœ…
- [x] `GET /api/v2/households/{id}/feeding-logs` - Logs de alimentaÃ§Ã£o âœ…
- [x] `POST /api/v2/households/{id}/invite` - Convidar membro âœ…
- [x] `PATCH /api/v2/households/{id}/invite-code` - Regenerar cÃ³digo de convite âœ…
- [x] `POST /api/v2/households/invites/{notificationId}/accept` - Aceitar convite âœ…
- [x] `POST /api/v2/households/invites/{notificationId}/reject` - Rejeitar convite âœ…
- [ ] `GET /api/households/{id}/invite-code` - **Obter cÃ³digo de convite** âš ï¸ (existe como PATCH em V2)
- [x] `POST /api/v2/households/join` - **Entrar em domicÃ­lio via cÃ³digo** âœ…

### â° Agendamentos (Schedules)
- [x] `GET /api/v2/schedules` - Listar agendamentos âœ…
- [x] `POST /api/v2/schedules` - Criar agendamento âœ…
- [x] `GET /api/v2/schedules/{id}` - Buscar agendamento âœ…
- [x] `PATCH /api/v2/schedules/{id}` - Atualizar agendamento âœ…
- [x] `DELETE /api/v2/schedules/{id}` - Deletar agendamento âœ…

### âš–ï¸ Peso (Weight)
- [x] `GET /api/v2/weight-logs` - Listar registros de peso âœ…
- [x] `POST /api/v2/weight-logs` - Criar registro de peso âœ…
- [x] `PUT /api/v2/weight-logs` - Atualizar registro de peso âœ…
- [x] `DELETE /api/v2/weight-logs` - Deletar registro de peso âœ…
- [x] `GET /api/v2/goals` - Listar metas de peso âœ…
- [x] `POST /api/v2/goals` - Criar meta de peso âœ…

### ğŸ‘¤ UsuÃ¡rios (Users)
- [x] `GET /api/v2/users/{id}` - Obter informaÃ§Ãµes do usuÃ¡rio âœ…
- [x] `PUT /api/v2/users/{id}` - Atualizar informaÃ§Ãµes do usuÃ¡rio âœ…
- [x] `GET /api/v2/users/{id}/preferences` - Obter preferÃªncias âœ…
- [x] `PUT /api/v2/users/{id}/preferences` - Atualizar preferÃªncias âœ…
- [x] `GET /api/v2/profile/{idOrUsername}` - **Perfil pÃºblico do usuÃ¡rio** âœ…
- [x] `PUT /api/v2/profile/{idOrUsername}` - **Atualizar perfil pÃºblico** âœ…

### ğŸ”” NotificaÃ§Ãµes (Notifications)
- [x] `GET /api/v2/notifications` - Listar notificaÃ§Ãµes âœ…
- [x] `POST /api/v2/notifications` - Criar notificaÃ§Ã£o âœ…
- [x] `GET /api/v2/notifications/{id}` - Buscar notificaÃ§Ã£o âœ…
- [x] `PATCH /api/v2/notifications/{id}` - Atualizar notificaÃ§Ã£o âœ…
- [x] `DELETE /api/v2/notifications/{id}` - Deletar notificaÃ§Ã£o âœ…
- [x] `PATCH /api/v2/notifications/bulk` - OperaÃ§Ãµes em lote âœ…
- [x] `DELETE /api/v2/notifications/bulk` - Deletar mÃºltiplas notificaÃ§Ãµes âœ…
- [x] `GET /api/v2/scheduled-notifications` - **Listar notificaÃ§Ãµes agendadas** âœ…
- [x] `POST /api/v2/scheduled-notifications` - **Criar notificaÃ§Ã£o agendada** âœ…
- [x] `POST /api/v2/scheduled-notifications/deliver` - **Entregar notificaÃ§Ãµes pendentes** âœ…

### ğŸ“Š EstatÃ­sticas e RelatÃ³rios
- [x] `GET /api/v2/statistics` - **EstatÃ­sticas gerais** âœ…

### ğŸ“¤ Upload
- [x] `POST /api/v2/upload` - **Upload de arquivo (imagem)** âœ…

### ğŸ”§ UtilitÃ¡rios
- [ ] `GET /api/swagger` - **DocumentaÃ§Ã£o Swagger V1** âš ï¸ (tem V2 equivalente)
- [ ] `GET /api/test-prisma` - **Teste Prisma** â³ (endpoint de desenvolvimento/teste)

---

## ğŸ“ˆ Resumo

### Totais
- **Migrados**: ~53 endpoints
- **Pendentes**: ~3 endpoints (baixa prioridade)
- **Parciais**: 0 endpoints

### Prioridades Sugeridas

#### ğŸ”´ Alta Prioridade
1. âœ… **EstatÃ­sticas** (`/api/v2/statistics`) - Usado frequentemente no dashboard - **CONCLUÃDO**
2. âœ… **Upload** (`/api/v2/upload`) - Funcionalidade crÃ­tica para fotos de gatos - **CONCLUÃDO**
3. âœ… **Gatos CRUD completo** (`GET/PUT/DELETE /api/v2/cats/{catId}`) - OperaÃ§Ãµes essenciais - **CONCLUÃDO**

#### ğŸŸ¡ MÃ©dia Prioridade
4. âœ… **Perfil pÃºblico** (`/api/v2/profile/{idOrUsername}`) - Funcionalidade social - **CONCLUÃDO**
5. âœ… **Atualizar alimentaÃ§Ã£o** (`PUT /api/v2/feedings/{id}`) - Funcionalidade Ãºtil mas nÃ£o crÃ­tica - **CONCLUÃDO**
6. âœ… **Entrar em domicÃ­lio via cÃ³digo** (`POST /api/v2/households/join`) - **CONCLUÃDO**

#### ğŸŸ¢ Baixa Prioridade
7. âœ… **NotificaÃ§Ãµes agendadas** - Sistema pode usar o endpoint de notificaÃ§Ãµes V2 - **CONCLUÃDO**
8. â¸ï¸ **AutenticaÃ§Ã£o** - Endpoints de auth podem permanecer como estÃ£o (nÃ£o seguem padrÃ£o V2)
9. â¸ï¸ **Teste Prisma** - Endpoint de desenvolvimento, pode ser removido

---

## ğŸ“ Notas Importantes

1. **AutenticaÃ§Ã£o**: Os endpoints `/api/auth/*` podem nÃ£o precisar de migraÃ§Ã£o para V2, pois sÃ£o especÃ­ficos do sistema de autenticaÃ§Ã£o e podem seguir padrÃµes diferentes.

2. **Swagger**: O endpoint `/api/swagger` tem versÃ£o V2 em `/api/v2/swagger`, mas o V1 pode ser mantido temporariamente para compatibilidade.

3. **DiferenÃ§as de MÃ©todos HTTP**: Alguns endpoints V1 usam `PUT` enquanto V2 usa `PATCH`. Isso Ã© uma decisÃ£o arquitetural e pode ser mantido.

4. **Fluxo de Convites**: O endpoint `POST /api/households/join` tem funcionalidade similar ao novo fluxo de convites em V2 (`/api/v2/households/invites/{notificationId}/accept`), mas funciona via cÃ³digo direto ao invÃ©s de notificaÃ§Ã£o.

---

## ğŸš€ PrÃ³ximos Passos

1. Priorizar endpoints de alta prioridade
2. Criar branches separadas para cada endpoint ou grupo de endpoints
3. Seguir padrÃµes estabelecidos nos endpoints V2 existentes:
   - AutenticaÃ§Ã£o JWT/Session
   - Respostas padronizadas com formato `{ success, data, error, count }`
   - DocumentaÃ§Ã£o Swagger atualizada
4. Testes de compatibilidade antes de marcar como completo

---

**Ãšltima atualizaÃ§Ã£o**: 2025-01-28
**PrÃ³xima revisÃ£o**: ApÃ³s migraÃ§Ã£o dos endpoints de alta prioridade

